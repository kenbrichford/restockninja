{% extends 'base.html' %}

{% load static %}

{% block title %}{{ product.name }}{% endblock %}

{% block style %}
<link rel="stylesheet" type="text/css" href="{% static 'products/css/style.css' %}"/>
{% endblock %}

{% block content %}
{% for image in images %}
<img src="{{ image.url }}">
{% endfor %}

<table>
    <tr>
        <td>Name</td>
        <td>{{ product.name }}</td>
    </tr>
    <tr>
        <td>Brand</td>
        <td>{{ product.brand }}</td>
    </tr>
    <tr>
        <td>Category</td>
        <td>{{ product.category }}</td>
    </tr>
    <tr>
        <td>Variants</td>
        <td>
            {% for variant in product.variants.all %}
            <a href="{% url 'product-detail' variant.slug variant.tag %}">
                <img src="{{ variant.thumbnail }}">
                {{ variant.name }}
            </a>
            {% endfor %}
        </td>
    </tr>
    <tr>
        <td>Listings</td>
        <td><table>
            {% for price in prices %}
            <tr>
                <td>{{ price.listing.vendor.name }}</td>
                <td>
                    {% if price.available %}In stock{% else %}Out of stock{% endif %} as of {{ price.updated_time }}
                </td>
                <td><a href="{{ price.listing.url }}" target="_blank">View item</a></td>
            </tr>
            {% endfor %}
        </table></td>
    </tr>
</table>
{% endblock %}